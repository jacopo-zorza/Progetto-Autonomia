# 1.1 - Configurazione Database

## Opzioni per il Database

### OPZIONE 1: Database locale per sviluppo iniziale
- **SQLite**: File database locale, solo per test delle funzioni base
- **Pro**: Facile da configurare per testare il codice
- **Contro**: NON supporta utenti multipli simultanei
- **Uso**: Solo per testare che il codice funzioni

### OPZIONE 2: Database per produzione (NECESSARIO per la tua app)
- **PostgreSQL su Railway**: GRATUITO, supporta utenti multipli, aggiornamenti in tempo reale
- **PostgreSQL su Render**: GRATUITO, ottima alternativa
- **MySQL su PlanetScale**: Database serverless, scala automaticamente
- **PostgreSQL su Supabase**: GRATUITO + API real-time integrate

### RACCOMANDAZIONE PER IL TUO PROGETTO: PostgreSQL su Railway
- **Perché**: Gratuito, supporta utenti multipli, aggiornamenti istantanei
- **Setup**: 5 minuti di configurazione
- **Aggiornamenti**: Automatici quando utenti inseriscono prodotti

## Setup per Sviluppo - Confronto Approcci

### OPZIONE A: SQL Puro (PIÙ SEMPLICE)
- **Cosa ti serve**: Python + sqlite3 (già incluso)
- **Pro**: 
  - Controllo totale delle query
  - Più veloce da scrivere
  - Niente dipendenze esterne
  - SQL è universale
- **Contro**: 
  - Più codice ripetitivo
  - Gestione manuale delle migrazioni

### OPZIONE B: SQLAlchemy/ORM
- **Cosa ti serve**: Flask-SQLAlchemy, Flask-Migrate
- **Pro**: 
  - Codice più pulito
  - Migrazioni automatiche
  - Protezione da SQL injection
- **Contro**: 
  - Curva di apprendimento
  - Meno controllo diretto

### RACCOMANDAZIONE: Iniziamo con SQL puro!
```python
import sqlite3

# Creare database
conn = sqlite3.connect('app.db')
cursor = conn.cursor()

# Creare tabelle con SQL
cursor.execute('''CREATE TABLE users...''')
```

## Aggiornamenti in tempo reale - SOLUZIONE

### Come funziona con database cloud:
1. **Utente A** inserisce un prodotto → salvato immediatamente su PostgreSQL
2. **Utente B** cerca prodotti → vede automaticamente il nuovo prodotto
3. **Nessun ritardo**: Ogni INSERT/UPDATE è visibile subito a tutti

### Setup con Railway (GRATUITO):
```bash
# 1. Registrati su railway.app
# 2. Crea nuovo progetto PostgreSQL  
# 3. Ottieni connection string
# 4. Usa nel codice Python
```

### Codice Python per aggiornamenti real-time:
```python
import psycopg2  # Per PostgreSQL

# Connessione al database cloud
conn = psycopg2.connect("postgresql://user:pass@host:port/db")

# Inserimento prodotto (visibile subito a tutti)
cursor.execute("INSERT INTO items (name, price, location) VALUES (%s, %s, %s)", 
               (nome, prezzo, posizione))
conn.commit()  # Salva immediatamente
```

## Struttura Database Proposta

### Tabelle principali:
1. **users** - Informazioni utenti
2. **items** - Oggetti in vendita  
3. **messages** - Chat tra utenti
4. **transactions** - Acquisti/vendite
5. **reviews** - Recensioni utenti

## Prossimi passi:
1. Creare modelli SQLAlchemy
2. Setup Flask con database
3. Creare prime migrazioni
4. Test inserimento dati